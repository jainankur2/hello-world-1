pipeline {
      agent any
      stages{
         stage('Build artifact'){
            steps{
              sh label: 'compile-hello-world', script: 'mvn -B -f pom.xml clean install'
            }
             }
         stage('Build and Push Image'){
             steps{
                script{
                     docker.build("docker build -t jainankur2/loylogic:${BUILD_NUMBER}",".")
                     docker.withRegistry('', 'registry-cred')
                    {
                        docker.image("jainankur2/loylogic:${BUILD_NUMBER}").push()
                    }
              }
              }
         }

      }
      }


